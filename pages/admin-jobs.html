<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Jobs Oversight | BoxFsh</title>
  <link href="./style.css" rel="stylesheet" />
</head>
<body class="bg-slate-900 text-white font-sans min-h-screen flex flex-col">

  <!-- Header -->
  <header class="p-4 bg-slate-800 shadow-md flex justify-between items-center">
    <h1 class="text-2xl font-bold">Job Oversight</h1>
    <a href="./admin.html" class="text-teal-400 hover:underline">‚Üê Back to Admin</a>
  </header>

  <!-- Main -->
  <main class="flex-grow container mx-auto px-4 py-8 space-y-8">

    <!-- Job Table -->
    <section class="bg-slate-800 p-6 rounded-xl border border-slate-700">
      <h2 class="text-lg font-semibold text-teal-400 mb-4">Live Jobs</h2>
      <div class="overflow-x-auto">
        <table class="w-full text-left text-sm">
          <thead class="text-slate-400 border-b border-slate-700">
            <tr>
              <th class="py-2">Job ID</th>
              <th class="py-2">Customer</th>
              <th class="py-2">Pro</th>
              <th class="py-2">Status</th>
              <th class="py-2">Progress</th>
              <th class="py-2">Actions</th>
            </tr>
          </thead>
          <tbody id="jobTableBody" class="text-slate-200"></tbody>
        </table>
      </div>
    </section>

    <!-- Job Modal -->
    <div id="jobModal" class="hidden fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center">
      <div class="bg-slate-800 p-6 rounded-xl border border-slate-700 w-full max-w-2xl shadow-xl relative">
        <button onclick="closeJobModal()" class="absolute top-2 right-4 text-slate-400 hover:text-white text-lg">‚úï</button>
        <h3 class="text-xl font-bold text-teal-400 mb-4">Job #<span id="jobModalId"></span></h3>
        <div class="text-sm text-slate-300 space-y-2 mb-4">
          <p><strong>Customer:</strong> <span id="jobModalCustomer"></span></p>
          <p><strong>Professional:</strong> <span id="jobModalPro"></span></p>
          <p><strong>Status:</strong> <span id="jobModalStatus"></span></p>
        </div>
        <div class="bg-slate-700 p-4 rounded-lg text-sm text-slate-200 space-y-1">
          <p><strong>Scope:</strong> <span id="jobModalScope"></span></p>
          <p><strong>Deliverables:</strong> <span id="jobModalDeliverables"></span></p>
          <p><strong>Updates:</strong> <span id="jobModalUpdates"></span></p>
        </div>
        <div class="mt-4 text-right space-x-2">
          <button id="pauseBtn" class="hidden bg-yellow-500 hover:bg-yellow-400 text-white px-4 py-2 rounded text-sm">Pause</button>
          <button id="completeBtn" class="hidden bg-green-500 hover:bg-green-400 text-white px-4 py-2 rounded text-sm">Mark Complete</button>
        </div>
      </div>
    </div>

  </main>

  <!-- Footer -->
  <footer class="bg-slate-800 text-slate-400 text-center text-sm p-4 mt-auto">
    Monitoring the machine. Every cog counts. ‚öôÔ∏èüêü
  </footer>

  <!-- Job Logic -->
  <script>
    const jobs = [
      {
        id: "BFJ2088",
        customer: "PrintPixie",
        pro: "ResinWraith",
        status: "In Progress",
        progress: "60%",
        scope: "Custom helmet + LED mount",
        deliverables: "STL, OBJ & painted clip-on model",
        updates: "Last update: May 15"
      },
      {
        id: "BFJ2044",
        customer: "SketchKing",
        pro: "ProtoMike",
        status: "Paused",
        progress: "35%",
        scope: "Mechanical hinge prototype",
        deliverables: "STL & functional video demo",
        updates: "Last update: May 13"
      },
      {
        id: "BFJ2001",
        customer: "LaserBeak",
        pro: "FormForge",
        status: "Completed",
        progress: "100%",
        scope: "Miniature display set",
        deliverables: "3 STL files and assembled product",
        updates: "Completed May 9"
      }
    ];

    const tbody = document.getElementById("jobTableBody");

    jobs.forEach(job => {
      const row = document.createElement("tr");
      row.className = "border-b border-slate-800 hover:bg-slate-700 transition";
      row.innerHTML = `
        <td class="py-2">${job.id}</td>
        <td class="py-2">${job.customer}</td>
        <td class="py-2">${job.pro}</td>
        <td class="py-2 ${
          job.status === "Completed" ? "text-green-400" :
          job.status === "Paused" ? "text-red-400" :
          "text-yellow-400"
        }">${job.status}</td>
        <td class="py-2">${job.progress}</td>
        <td class="py-2">
          <button onclick="viewJobDetails('${job.id}')" class="bg-teal-500 hover:bg-teal-400 text-white px-3 py-1 rounded text-xs">Details</button>
        </td>
      `;
      tbody.appendChild(row);
    });

    function viewJobDetails(jobId) {
      const job = jobs.find(j => j.id === jobId);
      if (!job) return;

      document.getElementById("jobModalId").textContent = job.id;
      document.getElementById("jobModalCustomer").textContent = job.customer;
      document.getElementById("jobModalPro").textContent = job.pro;
      document.getElementById("jobModalStatus").textContent = job.status;
      document.getElementById("jobModalScope").textContent = job.scope;
      document.getElementById("jobModalDeliverables").textContent = job.deliverables;
      document.getElementById("jobModalUpdates").textContent = job.updates;

      // Show/hide buttons based on job status
      document.getElementById("pauseBtn").classList.toggle("hidden", job.status !== "In Progress");
      document.getElementById("completeBtn").classList.toggle("hidden", job.status !== "In Progress");

      document.getElementById("jobModal").classList.remove("hidden");
    }

    function closeJobModal() {
      document.getElementById("jobModal").classList.add("hidden");
    }
  </script>

</body>
</html>
