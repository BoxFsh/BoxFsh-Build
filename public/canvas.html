<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Canvas Workspace | BoxFsh</title>
  <link href="./style.css" rel="stylesheet" />
  <style>
    .milestone-track {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 10px;
      padding: 1rem;
      background: #1e293b;
      border: 1px solid #334155;
      border-radius: 0.5rem;
      margin: 1rem;
    }
    .milestone-step {
      text-align: center;
      flex: 1;
    }
    .milestone-circle {
      width: 32px;
      height: 32px;
      background-color: #0f766e;
      color: white;
      border-radius: 50%;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      font-weight: bold;
      margin-bottom: 0.25rem;
      cursor: pointer;
    }
    .milestone-circle.active {
      background-color: #facc15;
      color: black;
    }
    .milestone-line {
      flex-grow: 1;
      height: 2px;
      background-color: #0f766e;
    }
    .modal {
      display: none;
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: #1e293b;
      color: white;
      padding: 2rem;
      border-radius: 0.5rem;
      z-index: 50;
      box-shadow: 0 0 15px rgba(0,0,0,0.5);
    }
    .modal.active {
      display: block;
    }
  </style>
</head>
<body class="bg-slate-900 text-white font-sans min-h-screen flex flex-col">

<header class="bg-slate-800 flex justify-between items-center px-6 py-3 border-b border-slate-700">
  <div class="text-xl font-bold text-teal-400">BoxF</div>
  <a href="./listings.html" class="text-sm text-teal-300 hover:underline">← Back to Listings</a>
</header>

<div class="milestone-track">
  <div class="milestone-step"><div class="milestone-circle" onclick="toggleModal('modal1', event)">1</div><div class="text-xs text-slate-300">Scope Approved</div></div>
  <div class="milestone-line"></div>
  <div class="milestone-step"><div class="milestone-circle" onclick="toggleModal('modal2', event)">2</div><div class="text-xs text-slate-300">Production Started</div></div>
  <div class="milestone-line"></div>
  <div class="milestone-step"><div class="milestone-circle" onclick="toggleModal('modal3', event)">3</div><div class="text-xs text-slate-300">Production Complete</div></div>
  <div class="milestone-line"></div>
  <div class="milestone-step"><div class="milestone-circle" onclick="toggleModal('modal4', event)">4</div><div class="text-xs text-slate-300">Shipped</div></div>
  <div class="milestone-line"></div>
  <div class="milestone-step"><div class="milestone-circle" onclick="toggleModal('modal5', event)">5</div><div class="text-xs text-slate-300">Delivered</div></div>
</div>

<div class="flex flex-grow">
  <!-- Sidebar -->
  <aside class="w-80 p-4 border-r border-slate-700 flex flex-col justify-between">
    <div>
      <h1 class="text-lg font-semibold text-teal-400 mb-4">Canvas Workspace</h1>
      <button onclick="switchTab('milestones')" class="w-full text-left p-3 text-lg font-semibold rounded bg-teal-700 mb-4">🖼 Canvas</button>
      <ul>
        <li><button onclick="switchTab('chat')" class="w-full text-left p-2 rounded bg-slate-800 mb-2">💬 Chat</button></li>
        <li><button onclick="switchTab('files')" class="w-full text-left p-2 rounded bg-slate-800 mb-2">📁 Files</button></li>
        <li><button onclick="switchTab('notes')" class="w-full text-left p-2 rounded bg-slate-800">📋 Job Scope</button></li>
      </ul>
    </div>
    <div>
      <div class="mb-6">
        <h3 class="text-teal-300 text-sm font-semibold mb-2">Project Info</h3>
        <p><strong>Job ID:</strong> #BX-J124</p>
        <p><strong>Title:</strong> Custom Helmet Design</p>
        <p><strong>Client:</strong> Sarah K.</p>
        <p><strong>Professional:</strong> BoxfshDesign</p>
        <p><strong>Budget:</strong> $120</p>
        <p><strong>Deadline:</strong> June 4</p>
      </div>
      <div>
        <h3 class="text-teal-300 text-sm font-semibold mb-2">Actions</h3>
        <button class="w-full mb-2 p-2 rounded bg-teal-500 hover:bg-teal-600">Mark Complete</button>
        <button class="w-full mb-2 p-2 rounded bg-slate-600 hover:bg-slate-500">Open Review Page</button>
        <button class="w-full p-2 rounded bg-red-600 hover:bg-red-700">Raise a Dispute</button>
      </div>
    </div>
  </aside>

  <!-- Main Content -->
  <main class="flex-grow p-6">
    <!-- Milestones Tab w/ Tools -->
    <div id="milestones" class="tab-content">
      <section class="mb-6">
        <h2 class="text-xl font-bold text-teal-300 mb-4">Modular Tool Panel</h2>
        <div class="space-y-2">
          <label><input type="checkbox" id="toggleSketch" checked> 🖊 Sketchpad</label><br>
          <label><input type="checkbox" id="toggleComments" checked> 💬 Comments</label><br>
          <label><input type="checkbox" id="toggleFiles" checked> 📁 Locked Files</label><br>
          <label><input type="checkbox" id="toggleTimeline" checked> 🕒 Timeline</label>
        </div>
      </section>
      <!-- Sketchpad -->
      <section id="sketchpadSection" class="mb-6 p-4 rounded bg-slate-800 border border-slate-700">
        <h3 class="text-lg font-semibold text-teal-400 mb-2">🖊 Sketchpad</h3>
        <p class="text-slate-300">Sketching canvas coming soon...</p>
      </section>

      <!-- Comments -->
      <section id="commentsSection" class="mb-6 p-4 rounded bg-slate-800 border border-slate-700">
        <h3 class="text-lg font-semibold text-teal-400 mb-2">💬 Comments</h3>
        <ul id="commentList" class="text-slate-300 space-y-1"></ul>
        <input type="text" id="commentInput" class="mt-2 w-full p-2 rounded bg-slate-700 text-white" placeholder="Write a comment..." onkeydown="if(event.key==='Enter') addComment()">
      </section>

      <!-- Files -->
      <section id="filesSection" class="mb-6 p-4 rounded bg-slate-800 border border-slate-700">
        <h3 class="text-lg font-semibold text-teal-400 mb-2">📁 Locked Files</h3>
        <p class="text-yellow-400 text-sm">Files will be available once the job is marked complete.</p>
      </section>

      <!-- Timeline -->
      <section id="timelineSection" class="mb-6 p-4 rounded bg-slate-800 border border-slate-700">
        <h3 class="text-lg font-semibold text-teal-400 mb-2">🕒 Timeline Slider</h3>
        <input type="range" min="1" max="5" value="1" class="w-full" />
        <p class="text-slate-400 mt-2">Preview project stages using the slider.</p>
      </section>
    </div>

    <!-- Chat Tab -->
    <div id="chat" class="tab-content hidden">
      <h2 class="text-xl font-semibold text-teal-400 mb-4">Job Chat</h2>
      <div class="bg-slate-800 p-4 rounded shadow border border-slate-700">
        <p class="text-slate-400">[Chat system will go here.]</p>
      </div>
    </div>

    <!-- Files Tab -->
    <div id="files" class="tab-content hidden">
      <h2 class="text-xl font-semibold text-teal-400 mb-4">Uploaded Files</h2>
      <input type="file" class="mb-4" />
      <div class="bg-slate-800 p-4 rounded shadow border border-slate-700">
        <p class="text-slate-300">Upload preview and history will be shown here.</p>
      </div>
    </div>

    <!-- Notes Tab -->
    <div id="notes" class="tab-content hidden">
      <h2 class="text-xl font-semibold text-teal-400 mb-4">Job Scope Reference</h2>
      <div class="bg-slate-800 p-4 rounded shadow border border-slate-700">
        <p class="text-slate-300 text-sm">Imported from job listing:</p>
        <p class="text-slate-100 text-base mt-2">"Looking for a custom-fitted, wearable cosplay helmet made of lightweight resin or 3D-printed PLA with matte silver finish. References attached."</p>
        <p class="text-slate-500 text-xs italic mt-2">Submitted by client during listing creation.</p>
      </div>
    </div>
  </main>
</div>

<!-- Modals -->
<div id="modal1" class="modal"><h2 class="text-teal-300 text-lg">Scope Approved</h2><p>Work can begin.</p><button onclick="toggleModal('modal1')" class="bg-red-600 px-4 py-2 mt-4 rounded hover:bg-red-700">Close</button></div>
<div id="modal2" class="modal"><h2 class="text-teal-300 text-lg">Production Started</h2><p>Work is in progress.</p><button onclick="toggleModal('modal2')" class="bg-red-600 px-4 py-2 mt-4 rounded hover:bg-red-700">Close</button></div>
<div id="modal3" class="modal"><h2 class="text-teal-300 text-lg">Production Complete</h2><p>Ready to ship.</p><button onclick="toggleModal('modal3')" class="bg-red-600 px-4 py-2 mt-4 rounded hover:bg-red-700">Close</button></div>
<div id="modal4" class="modal"><h2 class="text-teal-300 text-lg">Shipped</h2><p>Item is en route.</p><button onclick="toggleModal('modal4')" class="bg-red-600 px-4 py-2 mt-4 rounded hover:bg-red-700">Close</button></div>
<div id="modal5" class="modal"><h2 class="text-teal-300 text-lg">Delivered</h2><p>Project complete! <a href="#" class="text-teal-400 underline">Leave a review</a></p><button onclick="toggleModal('modal5')" class="bg-red-600 px-4 py-2 mt-4 rounded hover:bg-red-700">Close</button></div>

<!-- Footer -->
<footer class="bg-slate-800 p-4 text-center text-slate-400 text-sm mt-auto">
  Canvas built by BoxFsh. 🐟 Fully Fetchified.
</footer>

<script>
  const toolMap = {
    toggleSketch: 'sketchpadSection',
    toggleComments: 'commentsSection',
    toggleFiles: 'filesSection',
    toggleTimeline: 'timelineSection'
  };

  function saveToolState() {
    const state = {};
    Object.keys(toolMap).forEach(id => {
      state[id] = document.getElementById(id).checked;
    });
    localStorage.setItem("canvasToolState", JSON.stringify(state));
  }

  function loadToolState() {
    const saved = JSON.parse(localStorage.getItem("canvasToolState") || "{}");
    Object.entries(toolMap).forEach(([id, section]) => {
      const input = document.getElementById(id);
      if (saved[id] === false) {
        input.checked = false;
        document.getElementById(section).style.display = "none";
      }
      input.addEventListener("change", () => {
        document.getElementById(section).style.display = input.checked ? "block" : "none";
        saveToolState();
      });
    });
  }

  function switchTab(tabId) {
    document.querySelectorAll('.tab-content').forEach(tab => tab.classList.add('hidden'));
    document.getElementById(tabId).classList.remove('hidden');
  }

  function toggleModal(id, event) {
    const modal = document.getElementById(id);
    const isActive = modal.classList.contains('active');
    document.querySelectorAll('.modal').forEach(m => m.classList.remove('active'));
    if (!isActive) modal.classList.add('active');
  }

  function addComment() {
    const input = document.getElementById("commentInput");
    const list = document.getElementById("commentList");
    const time = new Date().toLocaleTimeString();
    if (input.value.trim()) {
      const li = document.createElement("li");
      li.textContent = `[${time}] ${input.value}`;
      list.appendChild(li);
      input.value = "";
    }
  }

  window.addEventListener("DOMContentLoaded", loadToolState);
</script>

</body>
</html>
